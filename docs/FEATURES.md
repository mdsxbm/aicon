# ✨ 功能详细说明

本文档详细介绍AICG平台的各项功能和使用方法。

---

## 📚 智能内容管理

### 📝 文本导入项目（NEW!）

**功能描述**: 支持多种格式的文本文件导入，自动识别章节结构。

**支持格式**:
- TXT - 纯文本文件
- DOCX - Microsoft Word文档
- PDF - PDF文档
- EPUB - 电子书格式

**使用步骤**:

1. **创建项目**
   - 点击"新建项目"按钮
   - 输入项目名称和描述
   - 点击"创建"

2. **上传文本文件**
   - 在项目详情页点击"上传文档"
   - 选择支持的文件格式
   - 等待文件上传完成

3. **章节识别**
   - 系统自动识别章节标题
   - 支持多种章节标记格式：
     - `第X章`
     - `Chapter X`
     - `# 标题`（Markdown格式）
   - 自动提取章节内容

4. **章节编辑**
   - 查看识别的章节列表
   - 编辑章节标题和内容
   - 合并/拆分章节
   - 忽略不需要的章节
   - 确认章节后进入导演引擎

**最佳实践**:
- ✅ 使用清晰的章节标题
- ✅ 保持文本格式一致
- ✅ 避免过长的章节（建议500-2000字）

---

### 📂 项目与章节管理

**项目管理功能**:
- 创建/编辑/删除项目
- 项目列表查看
- 项目搜索和筛选
- 项目状态追踪

**章节管理功能**:
- 章节列表展示
- 章节内容编辑
- 章节顺序调整
- 章节状态管理
- 批量操作

**章节状态**:
- `pending` - 待处理
- `confirmed` - 已确认
- `materials_prepared` - 素材已准备
- `video_generated` - 视频已生成

---

### 🎯 导演引擎（Director Engine）

**功能概述**: 导演引擎是素材生成和管理的核心模块，提供批量生成和精细调整能力。

#### 批量生成提示词

1. **选择章节**: 从下拉列表选择已确认的章节
2. **配置参数**:
   - 选择API密钥（大模型）
   - 选择提示词模板
   - 设置生成参数
3. **开始生成**: 点击"批量生成提示词"
4. **查看进度**: 实时显示生成进度和统计
5. **查看结果**: 生成完成后查看每句的提示词

#### 批量生成图片

1. **选择API密钥**: 选择图片生成服务的API密钥
2. **选择模型**: 
   - Flux系列（高质量）
   - SDXL系列（平衡）
   - Sora_Image（低成本）
   - 自定义模型
3. **开始生成**: 点击"批量生成图片"
4. **查看进度**: 实时显示生成进度
5. **预览图片**: 生成完成后预览每张图片

#### 批量生成音频

1. **选择API密钥**: 选择TTS服务的API密钥
2. **选择音色**: 选择配音音色
3. **开始生成**: 点击"批量生成音频"
4. **查看进度**: 实时显示生成进度
5. **试听音频**: 生成完成后试听每段音频

#### 单句精细调整

**查看句子详情**:
- 查看提示词
- 预览图片
- 试听音频
- 查看生成状态

**重新生成**:
- 编辑提示词后重新生成图片
- 重新生成提示词
- 重新生成音频
- 替换素材

**素材检测**:
- 点击"检测素材"按钮
- 查看素材完整性报告
- 识别缺失的素材
- 一键补充缺失素材

---

## 🎨 AI素材生成

### 🖼️ 图片生成

**支持的模型**:

| 模型系列 | 特点 | 成本 | 推荐场景 |
|---------|------|------|---------|
| **Flux系列** | 高质量，细节丰富 | 较高 | 高质量作品 |
| **SDXL系列** | 平衡质量和速度 | 中等 | 日常使用 |
| **Sora_Image** | 低成本 | ~¥0.04/张 | 批量生成 |
| **自定义模型** | 灵活配置 | 取决于服务商 | 特殊需求 |

**生成参数**:
- 图片尺寸（1024x1024, 1024x576等）
- 生成步数
- 引导系数（CFG Scale）
- 随机种子

**最佳实践**:
- ✅ 使用详细的提示词
- ✅ 保持风格一致性
- ✅ 合理设置生成参数
- ✅ 使用固定种子保证可复现

---

### 🎤 语音合成

**支持的服务**:
- **硅基流动 index-tts2**: 高质量中文TTS
- 情感丰富的配音
- 多种音色选择
- 自然的语音节奏

**音色选择**:
- 男声/女声
- 不同年龄段
- 不同情感风格

**生成参数**:
- 语速调整
- 音调调整
- 情感强度

---

### 🤖 LLM集成

**支持的模型**:
- GPT-4o系列（OpenAI）
- Claude 3.5系列（Anthropic）
- DeepSeek系列（高性价比）
- 自定义模型

**应用场景**:
- 提示词生成
- 字幕智能纠错
- 内容优化建议

---

## 🎬 专业视频合成

### 视频生成流程

1. **选择章节**: 确保素材已准备完成
2. **配置参数**:
   - 分辨率（竖屏/横屏/方形）
   - 帧率（24/30/60 FPS）
   - 字幕样式
   - Ken Burns效果
   - 视频速度
3. **选择BGM**: 可选背景音乐
4. **启用LLM纠错**: 可选字幕纠错
5. **开始生成**: 点击"生成视频"
6. **下载视频**: 生成完成后下载

### 视频参数详解

#### 分辨率选项

| 类型 | 分辨率 | 适用场景 |
|------|--------|---------|
| **竖屏** | 1080x1920 (9:16) | 抖音、快手等短视频平台 |
| **横屏** | 1920x1080 (16:9) | B站、YouTube等视频平台 |
| **方形** | 1080x1080 (1:1) | 微信、微博等社交媒体 |

#### Ken Burns效果

**什么是Ken Burns效果**:
- 静态图片的动态缩放和平移
- 模拟摄像机运动
- 增加视觉吸引力

**配置选项**:
- 缩放速度
- 平移方向
- 效果强度

#### 字幕样式

**可配置项**:
- 字体大小
- 字体颜色
- 描边颜色和宽度
- 位置（顶部/中部/底部）
- 对齐方式

#### BGM混合

**功能特性**:
- 自动循环短BGM
- 自动截断长BGM
- 音量可配置（0-50%）
- 智能淡入淡出

#### 视频加速

**速度选项**:
- 0.5x - 慢速
- 1.0x - 正常速度
- 1.5x - 快速
- 2.0x - 超快速

**技术特点**:
- 保持音调不变
- 在最终视频应用加速
- 避免重复编码

#### LLM字幕纠错

**功能说明**:
- 使用大模型智能修正字幕错别字
- 保持字数一致，防止时间轴错位
- 提高字幕准确性

**使用建议**:
- ✅ 适用于专业内容
- ⚠️ 会增加生成时间和成本
- ⚠️ 需要配置LLM API密钥

---

## 📤 导出与发布

### 🎬 剪映素材导出（NEW!）

**功能描述**: 将生成的素材导出为剪映草稿格式，可直接导入剪映专业版进行二次编辑。

**使用步骤**:

1. **检测素材**
   - 在导演引擎页面选择章节
   - 点击"检测素材"按钮
   - 确保所有素材已准备就绪

2. **导出剪映**
   - 点击"导出剪映"按钮
   - 等待打包完成
   - 自动下载ZIP文件

3. **导入剪映**
   - 解压下载的ZIP文件
   - 打开剪映专业版
   - 选择"导入草稿"
   - 选择解压后的文件夹
   - 开始编辑

**导出内容**:
- ✅ 所有图片素材
- ✅ 所有音频素材
- ✅ draft_content.json（时间轴配置）
- ✅ draft_meta_info.json（元数据）

**最佳实践**:
- ✅ 确保所有素材生成完成
- ✅ 检查素材完整性
- ✅ 导出前保存项目

---

### 📺 B站账号管理（NEW!）

**功能描述**: 管理多个B站账号，支持扫码登录和Cookie维护。

**使用步骤**:

1. **添加账号**
   - 进入"B站账号管理"页面
   - 点击"添加账号"
   - 输入账号昵称

2. **扫码登录**
   - 点击"扫码登录"
   - 使用B站APP扫描二维码
   - 等待登录成功

3. **账号管理**
   - 查看账号列表
   - 查看登录状态
   - 刷新Cookie
   - 删除账号

**注意事项**:
- ⚠️ Cookie有效期约30天
- ⚠️ 定期刷新Cookie保持登录状态
- ⚠️ 不要分享Cookie信息

---

### 🚀 B站稿件管理（NEW!）

**功能描述**: 将生成的视频一键发布到B站，支持自定义配置。

**使用步骤**:

1. **准备视频**
   - 确保视频已生成完成
   - 准备封面图片（可选）

2. **配置发布参数**
   - 选择B站账号
   - 输入视频标题
   - 选择分区
   - 添加标签
   - 上传封面（可选）
   - 填写简介

3. **发布视频**
   - 点击"发布到B站"
   - 等待上传完成
   - 查看发布状态

**分区选择**:
- 知识区
- 生活区
- 娱乐区
- 科技区
- 等等...

**标签建议**:
- 使用相关热门标签
- 最多10个标签
- 标签长度不超过20字符

**最佳实践**:
- ✅ 使用吸引人的标题
- ✅ 选择合适的分区
- ✅ 添加相关标签
- ✅ 使用高质量封面
- ✅ 填写详细简介

---

## 🔐 API密钥管理

### 添加API密钥

1. **进入设置页面**: 点击右上角设置图标
2. **选择供应商**: 
   - OpenAI
   - Anthropic
   - 硅基流动
   - 自定义
3. **输入密钥信息**:
   - 密钥名称
   - API密钥
   - Base URL（自定义供应商）
4. **保存密钥**: 点击"保存"

### 管理API密钥

**功能**:
- 查看密钥列表
- 编辑密钥信息
- 删除密钥
- 设置默认密钥
- 查看密钥状态

**安全提示**:
- ✅ 密钥加密存储
- ✅ 不要分享密钥
- ✅ 定期更换密钥
- ✅ 监控使用量

---

## 📦 BGM资源管理

### 上传BGM

1. **进入BGM管理页面**
2. **点击上传按钮**
3. **选择音频文件**: 支持MP3、WAV等格式
4. **等待上传完成**: 系统自动识别时长

### 管理BGM

**功能**:
- 查看BGM列表
- 试听BGM
- 删除BGM
- 批量删除

**使用建议**:
- ✅ 使用无版权音乐
- ✅ 音频质量不低于128kbps
- ✅ 时长适中（2-5分钟）

---

## 💡 使用技巧

### 提高生成质量

1. **优化提示词**:
   - 使用详细描述
   - 包含风格关键词
   - 避免矛盾描述

2. **选择合适模型**:
   - 根据预算选择
   - 考虑质量要求
   - 测试不同模型

3. **调整参数**:
   - 合理设置生成步数
   - 调整引导系数
   - 使用固定种子

### 降低成本

1. **使用低成本服务**:
   - Sora_Image图片生成
   - DeepSeek大模型

2. **批量生成**:
   - 减少API调用次数
   - 利用缓存机制

3. **合理规划**:
   - 先小批量测试
   - 确认效果后批量生成

### 提高效率

1. **使用模板**:
   - 保存常用配置
   - 复用提示词模板

2. **并行处理**:
   - 同时生成多个章节
   - 利用异步任务

3. **增量更新**:
   - 只重新生成修改的部分
   - 复用已生成素材

---

## 🔧 故障排查

### 常见问题

**Q: 素材生成失败**
- 检查API密钥是否有效
- 检查账户余额
- 查看错误日志

**Q: 视频合成失败**
- 确保所有素材已生成
- 检查FFmpeg是否正常
- 查看Celery日志

**Q: 下载失败**
- 检查网络连接
- 清除浏览器缓存
- 重试下载

---

## 📞 获取帮助

- 查看[安装指南](INSTALLATION.md)
- 查看[开发指南](DEVELOPMENT.md)
- 提交Issue: https://github.com/869413421/aicon2/issues
